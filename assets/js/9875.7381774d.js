"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[9875],{19875:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"enums/enabling-enums","title":"Enabling enums in your project","description":"Upgrade tooling","source":"@site/docs/enums/enabling-enums.md","sourceDirName":"enums","slug":"/enums/enabling-enums","permalink":"/en/docs/enums/enabling-enums","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/flow/edit/main/website/docs/enums/enabling-enums.md","tags":[],"version":"current","frontMatter":{"title":"Enabling enums in your project","slug":"/enums/enabling-enums"},"sidebar":"docsSidebar","previous":{"title":"Flow Enums","permalink":"/en/docs/enums"},"next":{"title":"Defining enums","permalink":"/en/docs/enums/defining-enums"}}');var i=s(74848),o=s(28453);const l={title:"Enabling enums in your project",slug:"/enums/enabling-enums"},r=void 0,a={},c=[{value:"Upgrade tooling",id:"toc-upgrade-tooling",level:2},{value:"Enable enums",id:"toc-enable-enums",level:2},{value:"Enable suggested ESLint rules",id:"toc-enable-suggested-eslint-rules",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"toc-upgrade-tooling",children:"Upgrade tooling"}),"\n",(0,i.jsx)(n.p,{children:"To enable Flow Enums in your repo, you must first update the following packages:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Upgrade to at least Flow 0.159","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Flow needs to have some configuration set to enable enums - see below."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Upgrade ",(0,i.jsx)(n.a,{href:"https://prettier.io/",children:"Prettier"})," to at least version 2.2","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"As of that version, Prettier can handle parsing and pretty printing Flow Enums out of the box."}),"\n",(0,i.jsxs)(n.li,{children:["You must use the ",(0,i.jsx)(n.code,{children:"flow"})," ",(0,i.jsx)(n.a,{href:"https://prettier.io/docs/en/options.html#parser",children:"parser option"})," for JavaScript files to be able to format Flow Enums."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Upgrade ",(0,i.jsx)(n.a,{href:"https://babeljs.io/",children:"Babel"})," to at least version 7.13.0","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"As of that version, Babel can parse Flow Enums. However, to enable this parsing some configuration needs to be supplied,\nand additionally it does not include the transform required - see below."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Upgrade ",(0,i.jsx)(n.a,{href:"https://github.com/facebook/jscodeshift",children:"jscodeshift"})," to at least version 0.11.0"]}),"\n",(0,i.jsxs)(n.li,{children:["Upgrade ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/hermes-parser",children:"hermes-parser"})," to at least version 0.4.8"]}),"\n",(0,i.jsxs)(n.li,{children:["For ESLint, either:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Use ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/hermes-eslint",children:"hermes-eslint"})," as your ESLint parser, at least version 0.4.8"]}),"\n",(0,i.jsxs)(n.li,{children:["Or upgrade ",(0,i.jsx)(n.a,{href:"https://github.com/babel/babel-eslint",children:"babel-eslint"})," to version 10.1.0","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["As of that version, ",(0,i.jsx)(n.code,{children:"babel-eslint"})," can handle Flow Enums out of the box."]}),"\n",(0,i.jsx)(n.li,{children:"Do not upgrade to 11.x, this branch does not support Flow Enums."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Or use another solution using Babel 7.13.0 or later, with Flow enabled - this may also work"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If you have any other tool which examines your code, you need to update it as well. If it uses ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/flow-parser",children:"flow-parser"}),",\n",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/hermes-parser",children:"hermes-parser"})," or ",(0,i.jsx)(n.code,{children:"@babel/parser"}),", upgrade those as per the instructions above.\nIf it uses some other parser, you will need to implement parsing Flow Enums in that parser. You can look at the existing code in Babel, Flow, and Hermes parsers to guide your work."]}),"\n",(0,i.jsx)(n.h2,{id:"toc-enable-enums",children:"Enable enums"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["In your ",(0,i.jsx)(n.code,{children:".flowconfig"}),", under the ",(0,i.jsx)(n.code,{children:"[options]"})," heading, add ",(0,i.jsx)(n.code,{children:"enums=true"})]}),"\n",(0,i.jsxs)(n.li,{children:["Add the Flow Enums Babel transform. It turns enum declaration AST nodes into calls to the runtime:\n",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/babel-plugin-transform-flow-enums",children:"babel-plugin-transform-flow-enums"}),".\nAdd it to your development dependencies and adjust your Babel configuration to use the transform.\nThe transform by default requires the runtime package directly (below), but you can configure this."]}),"\n",(0,i.jsxs)(n.li,{children:["Add the Flow Enum runtime package to your production dependencies.\nThis will be required and used at runtime to create Flow Enums: ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/flow-enums-runtime",children:"flow-enums-runtime"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"toc-enable-suggested-eslint-rules",children:"Enable suggested ESLint rules"}),"\n",(0,i.jsxs)(n.p,{children:["Enums can be exhaustively checked in ",(0,i.jsx)(n.code,{children:"switch"})," statements, so may increase the use of ",(0,i.jsx)(n.code,{children:"switch"})," statements compared to before.\nTo prevent common issues with ",(0,i.jsx)(n.code,{children:"switch"})," statements, we suggest you enable these ESLint rules (at least as warnings):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://eslint.org/docs/rules/no-fallthrough",children:"no-fallthrough"}),":\nThis prevents the user from accidentally forgetting a ",(0,i.jsx)(n.code,{children:"break"})," statement at the end of their switch case, while supporting common use-cases."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://eslint.org/docs/rules/no-case-declarations",children:"no-case-declarations"}),":\nThis prevents lexicaly scoped declarations (",(0,i.jsx)(n.code,{children:"let"}),", ",(0,i.jsx)(n.code,{children:"const"}),") from being introduced in a switch case, without wrapping that case in a new block.\nOtherwise, declarations in different cases could conflict."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["We also have some Flow Enums specific rules as part of ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-plugin-fb-flow",children:"eslint-plugin-fb-flow"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-plugin-fb-flow#use-flow-enums",children:"use-flow-enums"}),":\nSuggests that enum-like ",(0,i.jsx)(n.code,{children:"Object.freeze"})," and ",(0,i.jsx)(n.code,{children:"keyMirror"})," usage be turned into Flow Enums instead."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-plugin-fb-flow#flow-enums-default-if-possible",children:"flow-enums-default-if-possible"}),":\nAuto-fixes string enums with specified values identical to the member names to defaulted enums."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/eslint-plugin-fb-flow#no-flow-enums-object-mapping",children:"no-flow-enums-object-mapping"}),":\nSuggests using a function with a switch to map enum values to other values, instead of an object literal."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>r});var t=s(96540);const i={},o=t.createContext(i);function l(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);