"use strict";(globalThis.webpackChunknew_website=globalThis.webpackChunknew_website||[]).push([[7747],{17747(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"types/maybe","title":"Maybe Types","description":"You can prefix a type with ? to make it a union with null and void:","source":"@site/docs/types/maybe.md","sourceDirName":"types","slug":"/types/maybe","permalink":"/en/docs/types/maybe","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/flow/edit/main/website/docs/types/maybe.md","tags":[],"version":"current","frontMatter":{"title":"Maybe Types","slug":"/types/maybe"},"sidebar":"docsSidebar","previous":{"title":"Any","permalink":"/en/docs/types/any"},"next":{"title":"Functions","permalink":"/en/docs/types/functions"}}');var i=t(74848),a=t(28453);const r={title:"Maybe Types",slug:"/types/maybe"},o=void 0,c={},l=[{value:"Refining maybe types",id:"toc-refining-maybe-types",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["You can prefix a type with ",(0,i.jsx)(n.code,{children:"?"})," to make it a ",(0,i.jsx)(n.a,{href:"../unions",children:"union"})," with ",(0,i.jsx)(n.code,{children:"null"})," and ",(0,i.jsx)(n.code,{children:"void"}),":\n",(0,i.jsx)(n.code,{children:"?T"})," is equivalent to the union ",(0,i.jsx)(n.code,{children:"T | null | void"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For example, ",(0,i.jsx)(n.code,{children:"?number"})," is equivalent to ",(0,i.jsx)(n.code,{children:"number | null | void"}),", and allows for numbers, ",(0,i.jsx)(n.code,{children:"null"}),", and ",(0,i.jsx)(n.code,{children:"undefined"}),' as values. It\'s "maybe" a number.']}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-flow",metastring:'[{"startLine":9,"startColumn":20,"endLine":9,"endColumn":23,"description":"Cannot call `acceptsMaybeNumber` with `\\"42\\"` bound to `value` because string [1] is incompatible with number [2]. [incompatible-type]"}]',children:'function acceptsMaybeNumber(value: ?number) {\n  // ...\n}\n\nacceptsMaybeNumber(42);        // Works!\nacceptsMaybeNumber();          // Works! (implicitly undefined)\nacceptsMaybeNumber(undefined); // Works!\nacceptsMaybeNumber(null);      // Works!\nacceptsMaybeNumber("42");      // Error!\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In the case of objects, a ",(0,i.jsx)(n.strong,{children:"missing"})," property is not the same thing as an explicitly ",(0,i.jsx)(n.code,{children:"undefined"})," property."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-flow",metastring:'[{"startLine":6,"startColumn":18,"endLine":6,"endColumn":19,"description":"Cannot call `acceptsMaybeProp` with object literal bound to the first parameter because property `value` is missing in object literal [1] but exists in object type [2]. [incompatible-type]"}]',children:"function acceptsMaybeProp({value}: {value: ?number}) {\n  // ...\n}\n\nacceptsMaybeProp({value: undefined}); // Works!\nacceptsMaybeProp({});                 // Error!\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you want to allow missing properties, use ",(0,i.jsx)(n.a,{href:"../objects/#toc-optional-object-type-properties",children:"optional property"})," syntax, where the ",(0,i.jsx)(n.code,{children:"?"})," is placed ",(0,i.jsx)(n.em,{children:"before"})," the colon.\nIt is also possible to combine both syntaxes for an optional maybe type, for example ",(0,i.jsx)(n.code,{children:"{value?: ?number}"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"toc-refining-maybe-types",children:"Refining maybe types"}),"\n",(0,i.jsxs)(n.p,{children:["Imagine we have the type ",(0,i.jsx)(n.code,{children:"?number"}),", if we want to use that value as a ",(0,i.jsx)(n.code,{children:"number"}),"\nwe'll need to first check that it is not ",(0,i.jsx)(n.code,{children:"null"})," or ",(0,i.jsx)(n.code,{children:"undefined"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-flow",metastring:"[]",children:"function acceptsMaybeNumber(value: ?number): number {\n  if (value !== null && value !== undefined) {\n    return value * 2;\n  }\n  return 0;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can simplify the two checks against ",(0,i.jsx)(n.code,{children:"null"})," and ",(0,i.jsx)(n.code,{children:"undefined"})," using a single\n",(0,i.jsx)(n.code,{children:"!= null"})," check which will do both."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-flow",metastring:"[]",children:"function acceptsMaybeNumber(value: ?number): number {\n  if (value != null) {\n    return value * 2;\n  }\n  return 0;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Most double equal checks are discouraged in JavaScript, but the above pattern is safe (it checks for exactly ",(0,i.jsx)(n.code,{children:"null"})," and ",(0,i.jsx)(n.code,{children:"undefined"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["You could also flip it around, and check to make sure that the value has a type\nof ",(0,i.jsx)(n.code,{children:"number"})," before using it."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-flow",metastring:"[]",children:"function acceptsMaybeNumber(value: ?number): number {\n  if (typeof value === 'number') {\n    return value * 2;\n  }\n  return 0;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["However, type refinements can be lost. For instance, calling a function after refining the type of an object's property will invalidate this refinement.\nConsult the ",(0,i.jsx)(n.a,{href:"../../lang/refinements/#toc-refinement-invalidations",children:"refinement invalidations"})," docs for more details, to understand why Flow works this way,\nand how you can avoid this common pitfall."]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>o});var s=t(96540);const i={},a=s.createContext(i);function r(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);