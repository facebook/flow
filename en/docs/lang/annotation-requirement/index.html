<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-lang/annotation-requirement" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Annotation Requirement | Flow</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://flow.org/en/docs/lang/annotation-requirement/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Annotation Requirement | Flow"><meta data-rh="true" name="description" content="Note: As of version 0.199 Flow uses Local Type Inference as its inference algorithm."><meta data-rh="true" property="og:description" content="Note: As of version 0.199 Flow uses Local Type Inference as its inference algorithm."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://flow.org/en/docs/lang/annotation-requirement/"><link data-rh="true" rel="alternate" href="https://flow.org/en/docs/lang/annotation-requirement/" hreflang="en"><link data-rh="true" rel="alternate" href="https://flow.org/en/docs/lang/annotation-requirement/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://P6T3E8XPGT-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Flow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Flow Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-49208336-4","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>



<link rel="search" type="application/opensearchdescription+xml" title="Flow" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.7c5f81f5.css">
<script src="/assets/js/runtime~main.eeb9c242.js" defer="defer"></script>
<script src="/assets/js/main.6c4e16f4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Facebook Project Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Facebook Project Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/en/docs/getting-started/">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/">Docs</a><a class="navbar__item navbar__link" href="/try/">Try</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://twitter.com/flowtype" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__icon twitter__link" aria-label="Twitter"></a><a href="http://stackoverflow.com/questions/tagged/flowtype" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__icon stackoverflow__link" aria-label="Stack Overflow"></a><a href="https://github.com/facebook/flow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__icon github__link" aria-label="GitHub"></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/getting-started/">Introduction</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/faq/">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/types/">Type Annotations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/en/docs/lang/types-and-expressions/">Type System</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/types-and-expressions/">Types &amp; Expressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/variables/">Variable Declarations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/subtypes/">Subsets &amp; Subtypes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/type-hierarchy/">Type Hierarchy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/variance/">Type Variance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/nominal-structural/">Nominal &amp; Structural Typing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/depth-subtyping/">Depth Subtyping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/width-subtyping/">Width Subtyping</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/refinements/">Type Refinements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/lazy-modes/">Lazy Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/lang/types-first/">File Signatures (Types-First)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/lang/annotation-requirement/">Annotation Requirement</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/react/">React</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/enums/">Flow Enums</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/match/">Match</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/declarations/">Declarations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/libdefs/">Library Definitions</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/errors/">Error Suppressions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/linting/">Linting</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/strict/">Flow Strict</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/cli/">Flow CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/config/">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/tools/babel/">Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/editors/">Editors</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Type System</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Annotation Requirement</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Annotation Requirement</h1></header><blockquote>
<p><strong>Note:</strong> As of version 0.199 Flow uses <a href="https://medium.com/flow-type/local-type-inference-for-flow-aaa65d071347" target="_blank" rel="noopener noreferrer">Local Type Inference</a> as its inference algorithm.
The rules in this section reflect the main design features in this inference scheme.</p>
</blockquote>
<p>Flow tries to avoid requiring type annotation for parts of programs where types can easily
be inferred from the immediate context of an expression, variable, parameter, etc.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="variable-declarations">Variable declarations<a href="#variable-declarations" class="hash-link" aria-label="Direct link to Variable declarations" title="Direct link to Variable declarations">​</a></h2>
<p>Take for example the following variable definition</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> len </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;abc&quot;</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>All information necessary to infer the type of <code>len</code> is included in the initializer
<code>&quot;abc&quot;.length</code>. Flow will first determine that <code>&quot;abc&quot;</code> is a string, and then that the
<code>length</code> property of a string is a number.</p>
<p>The same logic can be applied for all <code>const</code>-like initializations. Where things
get a little more complicated is when variable initialization spans across multiple statements,
for example in</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maybeString</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain" style="display:inline-block">
</span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> len</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">4</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> maybeString </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">5</span><span class="codeBlockLineContent_Nema"><span class="token plain">  len </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> maybeString</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">6</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">7</span><span class="codeBlockLineContent_Nema"><span class="token plain">  len </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">8</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button></div></div>
<p>Flow can still determine that <code>len</code> is a <code>number</code>, but in order to do so it looks
ahead to multiple initializer statements. See section on <a href="/en/docs/lang/variables/">variable declarations</a>
for details on how various initializer patterns determine the type of a variable,
and when an annotation on a variable declaration is necessary.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-parameters">Function Parameters<a href="#function-parameters" class="hash-link" aria-label="Direct link to Function Parameters" title="Direct link to Function Parameters">​</a></h2>
<p>Unlike variable declarations, this kind of &quot;lookahead&quot; reasoning cannot be used to determine
the type of function parameters. Consider the function</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are many kinds of <code>x</code> on which we could access and return a <code>length</code> property:
an object with a <code>length</code> property, or a string, just to name a few. If later on in
the program we had the following calls to <code>getLength</code></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;abc&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>one possible inference would be that <code>x</code> is a <code>string | { length: number }</code>. What this implies,
however, is that the type of <code>getLength</code> is determined by any part of the current
program. This kind of global reasoning can lead to surprising action-at-a-distance
behavior, and so is avoided. Instead, Flow requires that function parameters are annotated. Failure to
provide such a type annotation manifests as a <code>[missing-local-annot]</code> error on the parameter <code>x</code>,
and the body of the function is checked with <code>x: any</code>:</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                   </span><span class="flowErrorUnderline_swOQ"> </span></div></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">4</span><span class="codeBlockLineContent_Nema"><span class="token plain" style="display:inline-block">
</span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">5</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// no error since getLength&#x27;s parameter type is &#x27;any&#x27;</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>1:20-1:20: Missing an annotation on `x`. [missing-local-annot]</div></pre></div></div>
<p>To fix this error, one can simply annotate <code>x</code> as</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button></div></div>
<p>The same requirement holds for class methods</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WrappedString</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setStringNoAnnotation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                        </span><span class="flowErrorUnderline_swOQ"> </span></div></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">4</span><span class="codeBlockLineContent_Nema"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">5</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">6</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">7</span><span class="codeBlockLineContent_Nema"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">8</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">9</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>3:25-3:25: Missing an annotation on `x`. [missing-local-annot]</div></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="toc-contextual-typing">Contextual Typing<a href="#toc-contextual-typing" class="hash-link" aria-label="Direct link to Contextual Typing" title="Direct link to Contextual Typing">​</a></h2>
<p>Function parameters do not always need to be explicitly annotated. In the case of a
callback function to a function call, the parameter type can easily
be inferred from the immediate context. Consider for example the following code</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> arrPlusOne </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> arr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">%</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Flow infers that the type of <code>arr</code> is <code>Array&lt;number&gt;</code>. Combining this with the builtin
information for <code>Array.find</code>, Flow can determine that the type of <code>x =&gt; x % 2 + 1</code>
needs to be <code>number =&gt; unknown</code>. This type acts as a <em>hint</em> for Flow and provides enough
information to determine the type of <code>x</code> as <code>number</code>.</p>
<p>Any attendant annotation can potentially act as a hint to a function parameter, for example</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">fn1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button></div></div>
<p>However, it is also possible that an annotation cannot be used as a function
parameter hint:</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fn2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">unknown</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> x </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                     </span><span class="flowErrorUnderline_swOQ"> </span></div></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>1:22-1:22: An annotation on `x` is required because Flow cannot infer its type from local context. [missing-local-annot]</div></pre></div></div>
<p>In this example the <code>unknown</code> type simply does not include enough information to
extract a candidate type for <code>x</code>.</p>
<p>Flow can infer the types for unannotated parameters even when they are nested within
other expressions like objects. For example in
in</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fn3</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">x </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                                               </span><span class="flowErrorUnderline_swOQ"> </span></div></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>1:48-1:48: Cannot cast `x` to string because number [1] is incompatible with string [2]. [incompatible-type]</div></pre></div></div>
<p>Flow will infer <code>number</code> as the type of <code>x</code>, and so the cast fails.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="toc-function-return-types">Function Return Types<a href="#toc-function-return-types" class="hash-link" aria-label="Direct link to Function Return Types" title="Direct link to Function Return Types">​</a></h2>
<p>Unlike function parameters, a function&#x27;s return type does not need to be annotated in general.
So the above definition of <code>getLength</code> won&#x27;t raise any Flow errors.</p>
<p>There are, however, a couple of notable exceptions to this rule. The first one is
class methods. If we included to the <code>WrappedString</code> class a <code>getString</code> method
that returns the internal <code>data</code> property:</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">WrappedString</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token function" style="color:#d73a49">getString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                      </span><span class="flowErrorUnderline_swOQ"></span></div></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">4</span><span class="codeBlockLineContent_Nema"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">5</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">6</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>3:23-3:22: Missing an annotation on return. [missing-local-annot]</div></pre></div></div>
<p>Flow would complain that <code>getString</code> is missing an annotation on the return.</p>
<p>The second exception is recursive definitions. A trivial example of this would be</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g"></span><span class="flowErrorUnderline_swOQ">              </span></div></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">4</span><span class="codeBlockLineContent_Nema"><span class="token plain" style="display:inline-block">
</span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">5</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">6</span><span class="codeBlockLineContent_Nema"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">7</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>1:1-1:14: The following definitions recursively depend on each other, and Flow cannot compute their types:
 - function [1] depends on other definition [2]
 - function [3] depends on other definition [4]
Please add type annotations to these definitions [5] [6] [definition-cycle]</div></pre></div></div>
<p>The above code raises a <code>[definition-cycle]</code> error, which points to the two locations
that form a dependency cycle, the two missing return annotations. Adding
a return annotation to either function would resolve the issue.</p>
<p>Effectively, the requirement on an annotation for method returns is a special-case
of the recursive definition restriction. The recursion is possible through access on
<code>this</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="toc-generic-calls">Generic Calls<a href="#toc-generic-calls" class="hash-link" aria-label="Direct link to Generic Calls" title="Direct link to Generic Calls">​</a></h2>
<p>In calls to <a href="/en/docs/types/generics/">generic functions</a> the type of the result may
depend on the types of the values passed in as arguments.
This section discusses how this result is computed, when type arguments are not
explicitly provided.</p>
<p>Consider for example the definition</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">map</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">T</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name constant" style="color:#36acaa">U</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  array</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ReadonlyArray</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">U</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and a potential call with arguments <code>x =&gt; x + 1</code> and <code>[1, 2, 3]</code>:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here Flow infers that the type of <code>x</code> is <code>number</code>.</p>
<p>Some other common examples of generic calls are calling the constructor of the generic
<a href="https://github.com/facebook/flow/blob/82f88520f2bfe0fa13748b5ead711432941f4cb9/lib/core.js#L1799-L1801" target="_blank" rel="noopener noreferrer"><code>Set</code> class</a>
or calling <code>useState</code> from the React library:</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> set </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain" style="display:inline-block">
</span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">useState</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">4</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setNum</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                      </span><span class="flowErrorUnderline_swOQ">            </span></div></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>4:23-4:34: Cannot call hook [1] because React hooks can only be called within components or hooks. (https://react.dev/reference/rules/rules-of-hooks) [react-rule-hook]</div></pre></div></div>
<p>Flow here infers that the type of <code>set</code> is <code>Set&lt;number&gt;</code>, and that <code>num</code> and <code>setNum</code>
are <code>number</code> and <code>(number) =&gt; void</code>, respectively.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="computing-a-solution">Computing a Solution<a href="#computing-a-solution" class="hash-link" aria-label="Direct link to Computing a Solution" title="Direct link to Computing a Solution">​</a></h3>
<p>Computing the result of a generic call amounts to:</p>
<ol>
<li>coming up with a solution for <code>T</code> and <code>U</code> that does not contain generic parts,</li>
<li>replacing <code>T</code> and <code>U</code> with the solution in the signature of <code>map</code>, and</li>
<li>performing a call to this new signature of <code>map</code>.</li>
</ol>
<p>This process is designed with two goals in mind:</p>
<ul>
<li><em>Soundness</em>. The results need to lead to a correct call when we reach step (3).</li>
<li><em>Completeness</em>. The types Flow produces need to be as precise and informative as possible,
to ensure that other parts of the program will be successfully checked.</li>
</ul>
<p>Let&#x27;s see how these two goals come into play in the <code>map</code> example from above.</p>
<p>Flow detects that <code>ReadonlyArray&lt;T&gt;</code> needs to be compatible with the type of <code>[1, 2, 3]</code>.
It can therefore infer that <code>T</code> is <code>number</code>.</p>
<p>With the knowledge of <code>T</code> it can now successfully check <code>x =&gt; x + 1</code>. The parameter <code>x</code>
is contextually typed as <code>number</code>, and thus the result <code>x + 1</code> is also a number.
This final constraint allows us to compute <code>U</code> as a <code>number</code> too.</p>
<p>The new signature of <code>map</code> after replacing the generic parts with the above solution
is</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ReadonlyArray</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">number</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">number</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is easy to see that the call would be successfully checked.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="errors-during-polymorphic-calls">Errors during Polymorphic Calls<a href="#errors-during-polymorphic-calls" class="hash-link" aria-label="Direct link to Errors during Polymorphic Calls" title="Direct link to Errors during Polymorphic Calls">​</a></h3>
<p>If the above process goes on smoothly, you should not be seeing any errors associated with the call.
What happens though when this process fails?</p>
<p>There are two reasons why this process could fail:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="under-constrained-type-parameters">Under-constrained Type Parameters<a href="#under-constrained-type-parameters" class="hash-link" aria-label="Direct link to Under-constrained Type Parameters" title="Direct link to Under-constrained Type Parameters">​</a></h4>
<p>There are cases where Flow might not have enough information to decide the type of a type parameter.
Let&#x27;s examine again a call to the builtin generic
<a href="https://github.com/facebook/flow/blob/82f88520f2bfe0fa13748b5ead711432941f4cb9/lib/core.js#L1799-L1801" target="_blank" rel="noopener noreferrer"><code>Set</code> class</a>
constructor, this time without passing any arguments:</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> set </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                </span><span class="flowErrorUnderline_swOQ">   </span></div></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain">set</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;abc&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>1:17-1:19: Cannot call `Set` because `T` [1] is underconstrained by new `Set` [2]. Either add explicit type arguments or cast the expression to your expected type. [underconstrained-implicit-instantiation]</div></pre></div></div>
<p>During the call to <code>new Set</code>, we are not providing enough information for Flow to
determine the type for <code>T</code>, even though the subsequent call to <code>set.add</code> clearly
implies that <code>T</code> will be a string. Remember that inference of type arguments is
local to the call, so Flow will not attempt to look ahead in later statements
to determine this.</p>
<p>In the absence of information, Flow would be at liberty to infer <em>any</em> type
as <code>T</code>: <code>any</code>, <code>mixed</code>, <code>empty</code>, etc.
This kind of decision is undesirable, as it can lead to surprising results.
For example, if we silently decided on <code>Set&lt;empty&gt;</code> then the call to <code>set.add(&quot;abc&quot;)</code> would
fail with an incompatibility between <code>string</code> and <code>empty</code>, without a clear indication
of where the <code>empty</code> came from.</p>
<p>So instead, in situations like this, you&#x27;ll get an <code>[underconstrained-implicit-instantiation]</code> error.
The way to fix this error is by adding a type annotation. There a few potential ways to do this:</p>
<ul>
<li>
<p>Add an annotation at the call-site in one of two ways:</p>
<ul>
<li>an explicit type argument<!-- -->
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> set </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Set</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name builtin">string</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>an annotation on the initialization variable:<!-- -->
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> set</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Set</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token builtin">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
<li>
<p>Add a default type on the type parameter <code>T</code> at the definition of the class:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">SetWithDefault</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">T</span><span class="token class-name"> </span><span class="token class-name operator" style="color:#393A34">=</span><span class="token class-name"> </span><span class="token class-name builtin">string</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">ReadonlySet</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name constant" style="color:#36acaa">T</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">iterable</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token maybe-class-name">Iterable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// more methods ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the absence of any type information at the call-site, Flow will use the default
type of <code>T</code> as the inferred type argument:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> defaultSet </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SetWithDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// defaultSet is SetWithDefault&lt;string&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="incompatibility-errors">Incompatibility Errors<a href="#incompatibility-errors" class="hash-link" aria-label="Direct link to Incompatibility Errors" title="Direct link to Incompatibility Errors">​</a></h4>
<p>Even when Flow manages to infer non-generic types for the type parameters in a generic
call, these types might still lead to incompatibilities either in the current call or in
code later on.</p>
<p>For example, if we had the following call to <code>map</code>:</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">map</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name constant" style="color:#36acaa">T</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name constant" style="color:#36acaa">U</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function-variable function" style="color:#d73a49">f</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">U</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> array</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">ReadonlyArray</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">U</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">         </span><span class="flowErrorUnderline_swOQ">     </span></div></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>2:10-2:14: Cannot use operator `+` with operands object literal [1] and number [2] [unsafe-addition]</div></pre></div></div>
<p>Flow will infer <code>T</code> as <code>{}</code>, and therefore type <code>x</code> as <code>{}</code>. This will cause an error when checking the arrow function
since the <code>+</code> operation is not allowed on objects.</p>
<p>Finally, a common source of errors is the case where the inferred type in a generic
call is correct for the call itself, but not indicative of the expected use later in the code.
For example, consider</p>
<div class="codeBlockContainer_r6yT"><div class="codeBlockContent_Ttwj tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_ec6o thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_pvST"><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">1</span><span class="codeBlockLineContent_Nema"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports">useState</span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">2</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setStr</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">                      </span><span class="flowErrorUnderline_swOQ">            </span></div></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">3</span><span class="codeBlockLineContent_Nema"><span class="token plain" style="display:inline-block">
</span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">4</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token keyword" style="color:#00009f">declare</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maybeString</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span></span><span class="token-line codeBlockLine_WHOb" style="color:#393A34"><span class="codeBlockLineNumber_gZUW">5</span><span class="codeBlockLineContent_Nema"><span class="token plain"></span><span class="token function" style="color:#d73a49">setStr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">maybeString</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><div class="flowErrorUnderlineContainer_r80d"><span class="flowErrorUnderlineLeftPadding_BT3g">       </span><span class="flowErrorUnderline_swOQ">           </span></div></span></span></code></pre><button type="button" aria-label="" class="copyButton_Szi8 clean-btn">Copy</button><pre class="flowErrors_qefp"><div>2:23-2:34: Cannot call hook [1] because React hooks can only be called within components or hooks. (https://react.dev/reference/rules/rules-of-hooks) [react-rule-hook]</div><div>5:8-5:18: Cannot call `setStr` with `maybeString` bound to the first parameter because: [incompatible-type] Either null or undefined [1] is incompatible with function type [2]. Or null or undefined [1] is incompatible with string [3].</div></pre></div></div>
<p>Passing the string <code>&quot;&quot;</code> to the call to <code>useState</code> makes Flow infer <code>string</code> as the type
of the state. So <code>setStr</code> will also expect a <code>string</code> as input when called later on,
and therefore passing a <code>?string</code> will be an error.</p>
<p>Again, to fix this error it suffices to annotate the expected &quot;wider&quot; type of state
when calling <code>useState</code>:</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setStr</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">useState</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name operator" style="color:#393A34">?</span><span class="token generic-function generic class-name builtin">string</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="toc-empty-array-literals">Empty Array Literals<a href="#toc-empty-array-literals" class="hash-link" aria-label="Direct link to Empty Array Literals" title="Direct link to Empty Array Literals">​</a></h2>
<p>Empty array literals (<code>[]</code>) are handled specially in Flow. You can read about their <a href="/en/docs/types/arrays/#toc-empty-array-literals">behavior and requirements</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/flow/edit/main/website/docs/lang/annotation-requirement.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/lang/types-first/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">File Signatures (Types-First)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/react/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Getting Started</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#variable-declarations" class="table-of-contents__link toc-highlight">Variable declarations</a></li><li><a href="#function-parameters" class="table-of-contents__link toc-highlight">Function Parameters</a></li><li><a href="#toc-contextual-typing" class="table-of-contents__link toc-highlight">Contextual Typing</a></li><li><a href="#toc-function-return-types" class="table-of-contents__link toc-highlight">Function Return Types</a></li><li><a href="#toc-generic-calls" class="table-of-contents__link toc-highlight">Generic Calls</a><ul><li><a href="#computing-a-solution" class="table-of-contents__link toc-highlight">Computing a Solution</a></li><li><a href="#errors-during-polymorphic-calls" class="table-of-contents__link toc-highlight">Errors during Polymorphic Calls</a></li></ul></li><li><a href="#toc-empty-array-literals" class="table-of-contents__link toc-highlight">Empty Array Literals</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/en/docs/getting-started/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/flowtype" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/8ezwRUK" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://medium.com/flow-type" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://github.com/facebook/flow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/oss_logo.png" alt="Facebook Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/oss_logo.png" alt="Facebook Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2026 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>