language: c
script: ./.travis-ci.sh
sudo: false

os:
- linux
- osx

env:
  - OCAML_VERSION=4.02.1 OPAM_VERSION=1.2.0
  - OCAML_VERSION=4.02.1 OPAM_VERSION=1.1.1
  - OCAML_VERSION=4.01.0 OPAM_VERSION=1.2.0
  - OCAML_VERSION=4.01.0 OPAM_VERSION=1.1.1

addons:
  apt:
    packages:
    - libelf-dev

cache:
  directories:
    - $HOME/.flow

before_cache:
  - rm -f $HOME/.flow/opam/*/config
  - rm -f $HOME/.flow/opam/*/log
  - rm -f $HOME/.flow/opam/*/opam-init

notifications:
  email:
    recipients:
      - flowtype@fb.com
  irc:
    channels:
      - "chat.freenode.net#flowtype"
    on_success: change
